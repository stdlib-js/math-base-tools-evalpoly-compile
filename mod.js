import*as r from"https://deno.land/std@0.90.0/path/mod.ts";import{Buffer as t}from"https://deno.land/std@0.90.0/node/buffer.ts";!globalThis.Buffer&&Object.defineProperty(globalThis,"Buffer",{value:t,enumerable:!1,writable:!0,configurable:!0}),!globalThis.global&&Object.defineProperty(globalThis,"global",{value:globalThis,writable:!1,enumerable:!1,configurable:!0});import e from"path";import n from"fs";var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},i="function"==typeof Object.defineProperty?Object.defineProperty:null;var u=function(){try{return i({},"x",{}),!0}catch(r){return!1}},a=Object.defineProperty,f=Object.prototype,l=f.toString,c=f.__defineGetter__,s=f.__defineSetter__,p=f.__lookupGetter__,v=f.__lookupSetter__;var b=function(r,t,e){var n,o,i,u;if("object"!=typeof r||null===r||"[object Array]"===l.call(r))throw new TypeError("invalid argument. First argument must be an object. Value: `"+r+"`.");if("object"!=typeof e||null===e||"[object Array]"===l.call(e))throw new TypeError("invalid argument. Property descriptor must be an object. Value: `"+e+"`.");if((o="value"in e)&&(p.call(r,t)||v.call(r,t)?(n=r.__proto__,r.__proto__=f,delete r[t],r[t]=e.value,r.__proto__=n):r[t]=e.value),i="get"in e,u="set"in e,o&&(i||u))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return i&&c&&c.call(r,t,e.get),u&&s&&s.call(r,t,e.set),r},y=a,g=b,m=u()?y:g;var d=function(r,t,e){m(r,t,{configurable:!1,enumerable:!1,writable:!1,value:e})},h=d,j=n.readFile;var w=function(){var r,t;for(r=[],t=0;t<arguments.length;t++)r.push(arguments[t]);j.apply(null,r)},_=n.readFileSync;var S=function(r,t){var e;try{e=arguments.length>1?_(r,t):_(r)}catch(r){return r}return e},E=w;h(E,"sync",S);var T=E;var O=function(r){return"string"==typeof r};var P=function(){return"function"==typeof Symbol&&"symbol"==typeof Symbol("foo")}();var x=function(){return P&&"symbol"==typeof Symbol.toStringTag},A=Object.prototype.toString,B=A;var I=function(r){return B.call(r)},V=Object.prototype.hasOwnProperty;var N=function(r,t){return null!=r&&V.call(r,t)},F="function"==typeof Symbol?Symbol.toStringTag:"",R=N,G=F,M=A;var k=I,C=function(r){var t,e,n;if(null==r)return M.call(r);e=r[G],t=R(r,G);try{r[G]=void 0}catch(t){return M.call(r)}return n=M.call(r),t?r[G]=e:delete r[G],n},L=x()?C:k,$=String.prototype.valueOf;var U=L,X=function(r){try{return $.call(r),!0}catch(r){return!1}},Y=x();var q=function(r){return"object"==typeof r&&(r instanceof String||(Y?X(r):"[object String]"===U(r)))},z=O,D=q;var H=h,J=function(r){return z(r)||D(r)},K=q;H(J,"isPrimitive",O),H(J,"isObject",K);var Q=J,W=Q.isPrimitive,Z=/[-\/\\^$*+?.()|[\]{}]/g;var rr=function(r){var t,e;if(!W(r))throw new TypeError("invalid argument. Must provide a regular expression string. Value: `"+r+"`.");if("/"===r[0])for(e=r.length-1;e>=0&&"/"!==r[e];e--);return void 0===e||e<=0?r.replace(Z,"\\$&"):(t=(t=r.substring(1,e)).replace(Z,"\\$&"),r=r[0]+t+r.substring(e))},tr=/./;var er=function(r){return"boolean"==typeof r},nr=Boolean.prototype.toString;var or=L,ir=function(r){try{return nr.call(r),!0}catch(r){return!1}},ur=x();var ar=function(r){return"object"==typeof r&&(r instanceof Boolean||(ur?ir(r):"[object Boolean]"===or(r)))},fr=er,lr=ar;var cr=h,sr=function(r){return fr(r)||lr(r)},pr=ar;cr(sr,"isPrimitive",er),cr(sr,"isObject",pr);var vr="object"==typeof self?self:null,br="object"==typeof window?window:null,yr=sr.isPrimitive,gr=function(){return new Function("return this;")()},mr=vr,dr=br,hr="object"==typeof o?o:null;var jr=function(r){if(arguments.length){if(!yr(r))throw new TypeError("invalid argument. Must provide a boolean primitive. Value: `"+r+"`.");if(r)return gr()}if(mr)return mr;if(dr)return dr;if(hr)return hr;throw new Error("unexpected error. Unable to resolve global object.")},wr=jr(),_r=wr.document&&wr.document.childNodes,Sr=Int8Array,Er=tr,Tr=_r,Or=Sr;var Pr=function(){return"function"==typeof Er||"object"==typeof Or||"function"==typeof Tr};var xr=function(){return/^\s*function\s*([^(]*)/i},Ar=xr;h(Ar,"REGEXP",xr());var Br=Ar,Ir=L;var Vr=Array.isArray?Array.isArray:function(r){return"[object Array]"===Ir(r)};var Nr=function(r){return null!==r&&"object"==typeof r};h(Nr,"isObjectLikeArray",function(r){if("function"!=typeof r)throw new TypeError("invalid argument. Must provide a function. Value: `"+r+"`.");return function(t){var e,n;if(!Vr(t))return!1;if(0===(e=t.length))return!1;for(n=0;n<e;n++)if(!1===r(t[n]))return!1;return!0}}(Nr));var Fr=Nr;var Rr=L,Gr=Br.REGEXP,Mr=function(r){return Fr(r)&&(r._isBuffer||r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r))};var kr=function(r){var t,e,n;if(("Object"===(e=Rr(r).slice(8,-1))||"Error"===e)&&r.constructor){if("string"==typeof(n=r.constructor).name)return n.name;if(t=Gr.exec(n.toString()))return t[1]}return Mr(r)?"Buffer":e},Cr=kr;var Lr=kr;var $r=function(r){var t;return null===r?"null":"object"===(t=typeof r)?Cr(r).toLowerCase():t},Ur=function(r){return Lr(r).toLowerCase()},Xr=Pr()?Ur:$r;var Yr=function(r){return"function"===Xr(r)},qr=RegExp.prototype.exec;var zr=L,Dr=function(r){try{return qr.call(r),!0}catch(r){return!1}},Hr=x();var Jr=rr,Kr=Yr,Qr=Q.isPrimitive,Wr=function(r){return"object"==typeof r&&(r instanceof RegExp||(Hr?Dr(r):"[object RegExp]"===zr(r)))};var Zr=function(r,t,e){if(!Qr(r))throw new TypeError("invalid argument. First argument must be a string primitive. Value: `"+r+"`.");if(Qr(t))t=Jr(t),t=new RegExp(t,"g");else if(!Wr(t))throw new TypeError("invalid argument. Second argument must be a string primitive or regular expression. Value: `"+t+"`.");if(!Qr(e)&&!Kr(e))throw new TypeError("invalid argument. Third argument must be a string primitive or replacement function. Value: `"+e+"`.");return r.replace(t,e)};var rt=function(r){return"number"==typeof r},tt=Number,et=tt.prototype.toString;var nt=L,ot=tt,it=function(r){try{return et.call(r),!0}catch(r){return!1}},ut=x();var at=function(r){return"object"==typeof r&&(r instanceof ot||(ut?it(r):"[object Number]"===nt(r)))},ft=rt,lt=at;var ct=h,st=function(r){return ft(r)||lt(r)},pt=at;ct(st,"isPrimitive",rt),ct(st,"isObject",pt);var vt=st,bt=Number.POSITIVE_INFINITY,yt=tt.NEGATIVE_INFINITY,gt=Math.floor;var mt=bt,dt=yt,ht=function(r){return gt(r)===r};var jt=function(r){return r<mt&&r>dt&&ht(r)},wt=vt.isPrimitive,_t=jt;var St=function(r){return wt(r)&&_t(r)},Et=vt.isObject,Tt=jt;var Ot=function(r){return Et(r)&&Tt(r.valueOf())},Pt=St,xt=Ot;var At=h,Bt=function(r){return Pt(r)||xt(r)},It=Ot;At(Bt,"isPrimitive",St),At(Bt,"isObject",It);var Vt=Bt,Nt=e.join,Ft=T.sync,Rt=Zr,Gt=Vt.isPrimitive,Mt={encoding:"utf8"},kt=Nt(r.dirname(r.fromFileUrl(import.meta.url)),"templates"),Ct=Ft(Nt(kt,"single_coefficient.js.txt"),Mt),Lt=Ft(Nt(kt,"evalpoly.js.txt"),Mt),$t=Ft(Nt(kt,"empty.js.txt"),Mt),Ut=Ft(Nt(kt,"loop.js.txt"),Mt);var Xt=function(r){var t,e,n,o,i;if(0===(n=r.length))return $t;if(1===n)return e=r[0].toString(),Gt(r[0])&&(e+=".0"),Rt(Ct,"{{coefficient}}",e);if(o=n-1,n>500){for(e="",i=0;i<n;i++)e+="\t"+r[i].toString(),Gt(r[i])&&(e+=".0"),i<o&&(e+=",\n");return Rt(Ut,"{{coefficients}}",e)}for(t=r[0].toString(),Gt(r[0])&&(t+=".0"),i=1;i<n;i++)t+=" + (x * ",i<o&&(t+="("),t+=r[i].toString(),Gt(r[i])&&(t+=".0");for(i=0;i<2*(n-1)-1;i++)t+=")";return e=r[0].toString(),Gt(r[0])&&(e+=".0"),e=Rt(Lt,"{{coefficient}}",e),e=Rt(e,"{{horner}}",t),Rt(e,"{{eslint}}",t.length>68?" // eslint-disable-line max-len":"")};export{Xt as default};
